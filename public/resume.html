<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Resume Generator • Sunny’s Resume SaaS</title>
  <link rel="icon" href="/favicon.png" type="image/png">

  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --border:#223055;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --primary:#6366f1;
      --primaryGlow:rgba(99,102,241,.45);
      --ok:#34d399;
      --err:#fb7185;

      --paper:#ffffff;
      --ink:#0f172a;
      --ink2:#334155;
      --line:#e2e8f0;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(circle at top, #111827, var(--bg));
      color:var(--text);
      min-height:100vh;
    }
    .container{max-width:1150px;margin:0 auto;padding:28px 18px 60px}
    .top{
      display:flex;justify-content:space-between;align-items:center;
      margin-bottom:18px;gap:10px;flex-wrap:wrap;
    }
    .top a{color:var(--muted);text-decoration:none;font-size:14px}
    .badge{
      font-size:12px;color:var(--muted);
      border:1px solid rgba(255,255,255,.08);
      padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.03);
    }

    .grid{
      display:grid;grid-template-columns: 1fr 1fr;gap:18px;
      align-items:start;
    }
    .card{
      background:var(--card);border:1px solid var(--border);
      border-radius:18px;padding:18px;
      box-shadow:0 30px 80px rgba(0,0,0,.45);
    }
    h1{margin:0 0 6px;font-size:20px}
    p{margin:0 0 12px;color:var(--muted);font-size:14px}
    label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
    textarea, input{
      width:100%;padding:12px 12px;border-radius:14px;
      border:1px solid #2b3c69;background:#0b1220;color:var(--text);
      outline:none;font-size:14px;
    }
    textarea{min-height:170px;resize:vertical}

    .row{display:flex;gap:10px;flex-wrap:wrap}
    .chip{
      padding:10px 12px;border-radius:999px;cursor:pointer;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.03);color:var(--text);
      font-size:13px;font-weight:600;
      transition:transform .12s ease, background .15s ease, border .15s ease;
      user-select:none;
    }
    .chip:hover{transform:translateY(-1px);background:rgba(99,102,241,.12);border-color:rgba(99,102,241,.35)}
    .chip.active{
      background:rgba(99,102,241,.20);
      border-color:rgba(99,102,241,.55);
      box-shadow:0 0 30px var(--primaryGlow);
    }

    /* Button click/magnetic visual */
    button { transition: transform .12s cubic-bezier(.2,.9,.3,1), box-shadow .12s ease, background .12s ease; }
    button:active { transform: translateY(2px) scale(.985); box-shadow: 0 6px 26px rgba(0,0,0,.28); }
    /* Magnetic hover lift for primary / ghost buttons */
    .magnetic { will-change: transform; transform: translateZ(0); }
    .magnetic:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 20px 40px rgba(0,0,0,.32); }
    .magnetic:active { transform: translateY(-2px) scale(.998); }

    /* Programmatic pressed state (used by JS for consistent feel) */
    button.force-active { transform: translateY(2px) scale(.985) !important; box-shadow: 0 6px 26px rgba(0,0,0,.28) !important; }

    /* Busy/disabled state */
    button.is-busy { opacity: .85; cursor: progress; }
    button:disabled { opacity: .65; cursor: not-allowed; }

  /* Unsaved indicator: subtle dot and glow on Save button */
  button.unsaved { box-shadow: 0 8px 22px rgba(99,102,241,0.09); }
  /* smaller, noticeable unsaved dot (slightly larger than original) */
  button.unsaved::after { content: ""; display:inline-block; width:9px; height:9px; background:#fb923c; border-radius:999px; margin-left:8px; vertical-align:middle; box-shadow:0 6px 14px rgba(251,146,60,0.18); border:1px solid rgba(255,255,255,0.05); }

    /* Flash animations */
    .flash-success { animation: flashGreen .9s ease; position: relative; }
    .flash-warn { animation: flashWarn .9s ease; position: relative; }
    @keyframes flashGreen {
      0% { box-shadow: 0 0 0 rgba(16,185,129,0); }
      20% { box-shadow: 0 6px 22px rgba(16,185,129,0.18); background: linear-gradient(90deg, #10b981, #34d399); color: #021014; }
      60% { box-shadow: 0 12px 40px rgba(16,185,129,0.14); }
      100% { box-shadow: 0 0 0 rgba(16,185,129,0); }
    }
    @keyframes flashWarn {
      0% { box-shadow: 0 0 0 rgba(239,68,68,0); }
      20% { box-shadow: 0 6px 22px rgba(239,68,68,0.18); background: linear-gradient(90deg,#fb7185,#fca5a5); color:#111827; }
      60% { box-shadow: 0 12px 40px rgba(239,68,68,0.14); }
      100% { box-shadow: 0 0 0 rgba(239,68,68,0); }
    }

    /* Badge pulse and tooltip */
    #editBadge { position: relative; transition: transform .18s ease, opacity .18s ease; }
    #editBadge.pulse { animation: pulse 1.4s infinite; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.04); } 100% { transform: scale(1); } }
    #editBadge[data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute; left: 50%; transform: translateX(-50%); bottom: -36px;
      background: rgba(15,23,42,0.95); color: #fff; padding:6px 8px; border-radius:6px; font-size:12px; white-space:nowrap;
      box-shadow:0 6px 20px rgba(0,0,0,.35);
      z-index: 30;
    }

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    button{
      border:0;border-radius:14px;padding:12px 14px;
      font-weight:800;cursor:pointer;font-size:14px;
    }
    .primary{
      background:var(--primary);color:white;
      box-shadow:0 0 0 var(--primaryGlow), 0 12px 40px rgba(0,0,0,.35);
    }
    .ghost{
      background:transparent;border:1px solid #2b3c69;color:var(--text);
    }
    .note{margin-top:10px;font-size:13px;color:var(--muted)}
    .note.ok{color:var(--ok)}
    .note.err{color:var(--err)}
    .small{font-size:12px;color:var(--muted)}

    /* Toast */
    #toast {
      position: fixed;
      left: 50%; transform: translateX(-50%);
      bottom: 26px; padding: 10px 14px; border-radius: 10px;
      background: rgba(15,23,42,0.92); color: #fff; font-weight:700; display:none; z-index:9999;
      box-shadow: 0 12px 30px rgba(0,0,0,.45);
    }
    #toast.success { background: linear-gradient(90deg,#10b981,#34d399); color:#06221a }
    #toast.warn { background: linear-gradient(90deg,#fb7185,#f97316); color:#2b0b05 }

    .hist-item {
      padding: 8px 12px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      display: flex; justify-content: space-between;
    }
    .hist-item:hover { background: rgba(255,255,255,0.06); }
    .hist-date { color: var(--muted); font-size: 11px; }

    .paper-wrap{display:flex;justify-content:center}
    .paper{
      width: 210mm;
      min-height: 297mm;
      background: var(--paper);
      color: var(--ink);
      border-radius: 14px;
      padding: 18mm 16mm;
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
    }
    .r-section{margin-top:12px}
    .r-title{
      font-size:12px;font-weight:900;letter-spacing:.12em;text-transform:uppercase;
      color:var(--ink2);margin:0 0 6px;
    }
    .r-text{font-size:12.5px;color:var(--ink);line-height:1.55}
    .r-bullets{margin:6px 0 0 16px;padding:0;font-size:12.5px;line-height:1.55}
    .r-bullets li{margin:4px 0}
    .pillrow{display:flex;gap:6px;flex-wrap:wrap}
    .pill{
      border:1px solid var(--line);
      padding:4px 8px;border-radius:999px;font-size:11px;color:var(--ink2);
      background:#f8fafc;
    }
    .muted{color:var(--ink2)}
    .hr{height:1px;background:var(--line);margin:10px 0}
    a { color: var(--primary); text-decoration:none; }

    [contenteditable]:hover {
      background-color: rgba(99, 102, 241, 0.05);
      outline: 1px dashed rgba(99, 102, 241, 0.3);
      cursor: text;
      border-radius: 3px;
    }
    [contenteditable]:focus {
      outline: 2px solid var(--primary);
      background-color: rgba(99, 102, 241, 0.08);
      border-radius: 3px;
    }

    @media print {
      /* Hide all app UI by default */
      body * { visibility: hidden !important; }

      /* Show only resume */
      .generated-resume, .generated-resume * { visibility: visible !important; }
      .generated-resume { position: absolute !important; left: 0 !important; top: 0 !important; width: 100% !important; }

      /* Extra defensive hides */
      header, nav, footer, .navbar, .no-print, .actions, button { display: none !important; }

      html, body { margin: 0 !important; padding: 0 !important; background: #fff !important; }
      @page { margin: 12mm; }
    }

    @media print {
      body { background: white !important; }
      .top, .controls-card { display: none !important; }
      .container { padding: 0 !important; max-width: none !important; }
      .grid { display: block !important; }
      .card { box-shadow: none !important; border: none !important; background: transparent !important; padding: 0 !important; }
      .paper-wrap { display:block !important; }
      .paper{
        width: auto !important;
        min-height: auto !important;
        border: none !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        padding: 12mm 12mm !important;
        page-break-after: always;
      }
      [contenteditable] { outline: none !important; background: transparent !important; }
      @page { size: A4; margin: 10mm; }
    }

    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      .paper{width:100%;min-height:auto}
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="top">
      <a href="./index.html">← Lobby</a>
      <div style="display:flex;gap:8px;align-items:center;">
        <div class="badge" id="who"></div>
        <div class="badge" id="editBadge" style="display:none; background:linear-gradient(90deg,#fde68a,#fca5a5); color:#0f172a;">Manual edits saved</div>
      </div>
    </div>

    <div class="grid">
      <div class="card controls-card">
        <h1>Resume Generator</h1>
        <p>Pick a mode, select what AI should fix, paste JD, and generate.</p>

        <label>Mode</label>
        <div class="row" id="modes">
          <div class="chip active" data-mode="ats">ATS</div>
          <div class="chip" data-mode="faang">FAANG</div>
          <div class="chip" data-mode="creative">Creative</div>
        </div>

        <label style="margin-top:18px;">AI Target Scope (What should AI fix?)</label>
        <div style="background:rgba(255,255,255,.03); padding:10px; border-radius:12px; border:1px solid #223055;">
          <div id="ai-scope-list" class="row" style="gap:15px; font-size:13px; flex-direction:column; align-items:flex-start;"></div>

            <div style="margin-top:12px; border-top:1px solid rgba(255,255,255,0.1); padding-top:8px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
                <button class="ghost" id="btnAddAiSection" style="padding:6px 10px; font-size:12px;">+ Add New Section</button>
                <button class="ghost" id="btnSaveEdits" style="padding:6px 10px; font-size:12px;">Save Edits</button>
                <button class="ghost" id="btnUndoEdits" style="padding:6px 10px; font-size:12px; display:none;">Undo Save</button>
                <button class="ghost" id="btnResetEdits" style="padding:6px 10px; font-size:12px;">Reset Edits</button>
                <button class="ghost" id="btnToggleHistory" style="padding:6px 10px; font-size:12px;">Recent Resumes</button>
              </div>
        </div>

        <label style="margin-top:14px;">Template</label>
        <div class="row" id="templates">
          <div class="chip active" data-template="classic">Classic</div>
          <div class="chip" data-template="modern">Modern</div>
          <div class="chip" data-template="minimal">Minimal</div>
        </div>

        <label style="margin-top:14px;">Job Description</label>
        <textarea id="jd" placeholder="Paste the job description here..."></textarea>

        <div class="actions">
          <button class="primary" id="btnGen">Generate Resume</button>
          <button class="ghost" id="btnPdf">Download PDF</button>
          <button class="ghost" id="btnEdit">Edit Profile</button>
          <button class="ghost" id="btnClear">Clear JD</button>
          <button class="ghost" id="btnClearDraft">Clear Draft</button>
          <button class="ghost" id="btnLogout">Lock</button>
        </div>

        <div class="note" id="status"></div>
        <div class="note small">
          Tip: You can <b>click on the resume text</b> to edit it before downloading. (Edits auto-save)
        </div>

        <div id="history-container" style="margin-top:25px; border-top:1px solid #223055; padding-top:15px; display:none;">
          <label>Recent Generations</label>
          <div id="history-list" style="display:flex; flex-direction:column; gap:8px;"></div>
        </div>
      </div>

      <div class="card">
        <h1 style="margin-bottom:10px;">Preview (PDF-ready)</h1>
        <div class="paper-wrap">
          <div class="paper" id="paper"></div>
        </div>
      </div>
    </div>
  </div>
  <div style="text-align:center;margin-top:10px;color:var(--muted);font-size:14px;">
    <a href="./index.html" style="color:var(--muted);margin-right:12px;">Home</a>
    <a href="./contact.html" style="color:var(--muted);margin-right:12px;">Contact</a>
    <a href="./register.html" style="color:var(--muted);">Register</a>
  </div>
  <script type="module" src="./js/resume/resume-main.js"></script>
  <div id="toast" role="status" aria-live="polite"></div>
</body>
</html>
